<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=320px" />
    <title>Upload Photos</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style type="text/css">
        body {
            text-align: center;
        }
        input[type=file] {
            display: inline-block;
        }
        .file-input-name {
            display: block;
        }
        progress {
            width: 100%;
            max-width: 320px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <script src="https://malsup.github.io/jquery.form.js"></script> 
    <script src="http://gregpike.net/demos/bootstrap-file-input/bootstrap.file-input.js"></script>
    <script type="text/javascript">
        $(function () {
            try {
                document.querySelector("input[name=timezone]").value = Intl.DateTimeFormat().resolvedOptions().timeZone;
            } catch (e) {
                console.error(e);
            }

            $('input[type=file]').bootstrapFileInput();

            var progress = $("progress");
            var percent = $("#percent");
            var submit = $("input[type=submit]");

            $('form').ajaxForm({
                beforeSend: function () {
                    submit.hide();
                    progress.val(0);
                    percent.text('0%');
                },
                uploadProgress: function (event, position, total, percentComplete) {
                    progress.val(percentComplete);
                    percent.text(percentComplete + '%');
                },
                success: function (data) {
                    progress.val(0);
                    $("input[type=file]").val("");
                    $("span.file-input-name").text("");
                    percent.text("Successfully uploaded " + data.length + " files.");
                },
                complete: function (xhr) {
                    submit.show();
                    window.status = xhr.responseText;
                },
                error: function () {
                    alert("An unknown error occurred.");
                }
            }); 
        });
    </script>
</head>
<body>
    <div id="container">
        <form method="post" enctype="multipart/form-data" action="/api/files">
            <h1>Upload Files</h1>
            <input type="file" name="files" multiple />
            <input type="hidden" name="timezone" value="" />
            <div>&nbsp;</div>
            <input type="submit" class="btn btn-primary" value="Upload Files" />
        </form>
        <div>&nbsp;</div>
        <progress value="0" max="100"></progress>
        <div id="percent"></div>
    </div>
</body>
</html>