<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>List Photos</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"
            integrity="sha256-owX7sroiO/O1a7h3a4X29A1g3QgqdNvijRQ7V5TH45M="
            crossorigin="anonymous"></script>
    <script src="scripts/list.js"></script>
    <style type="text/css">
        body {
            font-family: sans-serif;
            font-size: 14px;
        }
        a:not(:hover):not(:active) {
            text-decoration: none;
        }
        .top-form {
            text-align: center;
            margin-bottom: 0.5em;
        }
        .top-form > * {
            padding: 0 0.5em;
        }
        table {
            table-layout: fixed;
            width: 100%;
            border-collapse: collapse;
        }
        td, th {
            text-align: left;
            white-space: nowrap;
            overflow-x: hidden;
            text-overflow: ellipsis;
            padding: 8px 0;
        }
        .file {
            display: inline-block;
            background-color: #f0f0f0;
            margin-left: 10px;
            margin-bottom: 10px;
            padding: 0 10px;
            border-radius: 5px;
            border: 1px solid #888;
            cursor: pointer;
        }
        .file > * {
            display: inline-block;
            vertical-align: middle;
        }
        .file .ck {
            text-align: center;
            margin: 0;
        }
        .file .ck input[type=checkbox]{
            pointer-events: none;
        }
        .file img {
            max-width: 240px;
            height: 120px;
            margin: 0 10px;
        }
        .file.checked, tr.checked {
            background-color: #c0d0e0;
        }
    </style>
</head>
<body>
    <div id="ko-area" style="display: none" data-bind="style: { display: 'block' }">
        <div class="top-form">
            <label>
                Taken after:
                <input type="datetime-local" id="taken-after" data-bind="textInput: startDate">
            </label>
            <label>
                Taken before:
                <input type="datetime-local" id="taken-before" data-bind="textInput: endDate">
            </label>
            <label>
                Uploaded by:
                <select data-bind="options: userNames, value: userName" style="max-width: 150px"></select>
            </label>
            <label>
                Category:
                <select data-bind="options: categories, value: category" style="max-width: 150px"></select>
            </label>
            <br />
            <label>
                View as:
                <select data-bind="value: viewStyle">
                    <option>Table</option>
                    <option>Thumbnails</option>
                </select>
            </label>
        </div>

        <p align="center">
            The taken date/time of a photo uses the time zone where it was taken. The uploaded date/time is listed in your time zone (<span data-bind="text: myTimeZone"></span>).
        </p>
        
        <!-- ko if: viewStyle() == 'Table' -->
        <table>
            <thead>
                <tr>
                    <th width="32px"></th>
                    <th width="300px">ID</th>
                    <th width="100%">Original name</th>
                    <th width="200px">Taken (local time)</th>
                    <th width="200px">Uploaded</th>
                    <th width="200px">Uploaded by</th>
                    <th width="200px">Category</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: displayedFiles">
                <tr style="cursor: pointer" data-bind="css: { checked: checked }, click: toggle">
                    <td style="text-align: center">
                        <input type="checkbox" style="margin: 0" data-bind="checked: checked, click: defaultAction, clickBubble: false" />
                    </td>
                    <td>
                        <a href="#" target="_blank" data-bind="text: fileMetadataId, attr: { href: url }, click: defaultAction, clickBubble: false"></a>
                    </td>
                    <td data-bind="text: originalFilename"></td>
                    <td data-bind="text: takenAtStr"></td>
                    <td data-bind="text: uploadedAtStr"></td>
                    <td data-bind="text: userName"></td>
                    <td data-bind="text: category"></td>
                </tr>
            </tbody>
        </table>
        <!-- /ko -->
        <!-- ko if: viewStyle() == 'Thumbnails' -->
        <!-- ko foreach: displayedFiles -->
        <div class="file" data-bind="css: { checked: checked }, click: toggle">
            <div class="ck">
                <input type="checkbox" data-bind="checked: checked, click: defaultAction, clickBubble: false" />
            </div>
            <img data-bind="attr: { src: thumbnailUrl }" />
            <div>
                <div><a href="#" target="_blank" data-bind="text: originalFilename, attr: { href: url }, click: defaultAction, clickBubble: false"></a></div>
                <div>Taken: <span data-bind="text: takenAtStr"></span></div>
                <div>Uploaded: <span data-bind="text: uploadedAtStr"></span></div>
                <div>Uploaded by: <span data-bind="text: userName"></span></div>
                <div>Category: <span data-bind="text: category"></span></div>
            </div>
        </div>
        <!-- /ko -->
        <!-- /ko -->
    </div>
</body>
</html>